- extends "smartmin/read.html"
- load smartmin i18n

- block pre-content

- block content

  - include 'common_dialogs.haml'

  %script{ type:"text/javascript" }
    var contextData = {{ context_data_json|safe }};

  .{ ng-controller:"InboxController", ng-init:'init({{ initial_label_id|default:"null" }})' }
    .page-header.clearfix
      %h2.pull-back
        %span{ ng-if:"activeLabel" }
          %span.glyphicon.glyphicon-tag
          &nbsp;
          [[ activeLabel.name ]]
        %span{ ng-if:"!activeLabel" }
          %span.glyphicon.glyphicon-envelope
          &nbsp;
          - trans "Inbox"

      .page-header-buttons{ ng-if:"activeLabel" }
        - if org_perms.labels.label_update or org_perms.labels.label_delete
          .btn-group
            - if org_perms.labels.label_update
              %a.btn.btn-default{ ng-href:"/label/update/[[ activeLabel.id ]]/", tooltip:"Edit Label" }
                %span.glyphicon.glyphicon-pencil
            - if org_perms.labels.label_delete
              %button.btn.btn-default{ ng-click:"onDeleteLabel()", tooltip:"Delete Label" }
                %span.glyphicon.glyphicon-trash

    .row
      .col-md-2
        .label-menu
          %ul
            %li
              %a{ href:"#", ng-click:"activateLabel(null)" }
                %strong{ ng-if:"!activeLabel" }
                  - trans "Inbox"
                %span{ ng-if:"activeLabel" }
                  - trans "Inbox"
            %li
              %a{ href:"{% url 'home.cases' %}" }
                - trans "Cases"
        .label-menu
          %h3
            - trans "Labels"
          %ul
            %li{ ng-repeat:"label in labels" }
              %a{ href:"#", ng-click:"activateLabel(label)" }
                %strong{ ng-if:"label == activeLabel" }
                  [[ label.name ]] ([[ label.count ]])
                %span{ ng-if:"label != activeLabel" }
                  [[ label.name ]] ([[ label.count ]])
      .col-md-10
        - block inbox-items


- block extra-style
  {{ block.super }}
  :css
    .label-menu {
      margin-bottom: 1em;
    }
    .label-menu h3 {
      margin: 0 0 1em 0;
      font-size: 1.2em;
    }
    .label-menu ul {
      margin: 0;
      padding: 0;
      list-style: none;
    }
